
# HTTP协议知识总结(一) #

## 目录 ##

1. [概述](#href1)
2. [历史](#href2)
3. [特点](#href3)
4. [网络基础TCP/IP](#href4)
    1. [分层管理](#href4-1)
    2. [通信数据流](#href4-2)
5. [与HTTP关系密切的协议](#href5)
    1. [IP协议](#href5-3)
    2. [TCP协议](#href5-4)
    3. [DNS服务](#href5-5)
6. [URI和URL](#href6)

## <a name="href1">概述</a> ##

HTTP(Hyper Text Transfer Protocol，超文本传输协议) 是基于 TCP/IP 协议的应用层协议，主要规定了客户端和服务器之间的通信格式，默认使用80端口。

## <a name="href2">历史</a> ##

1. HTTP/0.9: HTTP 于1990年问世，那时的 HTTP 并没有作为正式的标准被建立，遂命名为 HTTP/0.9(即正式版本的前一版本);
2. HTTP/1.0: 1996年 HTTP 正式作为标准被公布，版本被命名为 HTTP/1.0;
3. HTTP/1.1: 1997年公布的 HTTP/1.1 是目前最主流的 HTTP 协议版本;
4. HTTP/2.0: 2015年公布了 HTTP/2.0 版本，但要达到较高的覆盖率，仍需假以时日;

这里补充一下 HTTP/2.0 的一些内容，HTTP/2.0 引入了"服务端推(server push)"的概念，它允许服务端在客户端需要数据之前就主动地将数据发送到客户端缓存中，从而提高性能。HTTP/2 提供更多的加密支持，HTTP/2.0 使用多路技术，允许多个消息在一个连接上同时交差。它增加了头压缩(header compression)，因此即使非常小的请求，其请求和响应的 Header 都只会占用很小比例的带宽。

## <a name="href3">特点</a> ##

HTTP 协议的主要特点有:

1. 简单快速: 客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有 GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于 HTTP 协议简单，使得 HTTP 服务器的程序规模小，因而通信速度很快;

2. 灵活: HTTP 允许传输任意类型的数据对象。正在传输的类型由`Content-Type`加以标记;

3. 无连接: 无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间;

4. 无状态: HTTP 协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

## <a name="href4">网络基础TCP/IP</a> ##

> 通常使用的网络(包括互联网)是在 TCP/IP 协议族的基础上运作的。而 HTTP 属于它内部的一个子集(具体属于其中的应用层)。

### <a name="href4-1">分层管理</a> ###

TCP/IP 协议族按层次分为以下4层: 应用层、传输层、网络层和数据链路层，分层管理能很方便地在互联网中某个部分(层)发生变化时直接替换变动的层从而避免"牵一发而动全身"，只要规划好各个层之间的接口，每个层内部的设计就能够自由地改动。

TCP/IP 协议族各层的作用如下:

1. 应用层: 决定了向用户提供应用服务时通信的活动，这一层预存了各类通用的应用服务，比如 FTP(File Transfer Protocol，文本传输协议)、DNS(Domain Name System，域名系统)、HTTP 等;

2. 传输层: 是网络连接中的两台计算机之间数据传输的桥梁，其中包括两个性质不同的协议: TCP(Transmission Control Protocol，传输控制协议)和UDP(User Data Protocol，用户数据报协议);

3. 网络层(网络互连层): 网络层用来处理网络上流动的数据包，数据包是网络传输的最小数据单位，该层规定了通过怎样的路径(传输路线)到达对方计算机，并把数据包传送给对方;

4. 链路层(数据链路层、网络接口层): 用来处理网络的硬件部分，包括控制操作系统、硬件的设备驱动、NIC(Network Interface Card，网络适配器，即网卡)，及光纤等物理可见部分(还包括连接器等一切传输媒介)。

### <a name="href4-2">通信数据流</a> ###

> 利用 TCP/IP 协议族进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端则从链路层往上走。

以 HTTP 为例，整个网络通信过程如下:

发送过程:

1. 客户端发起访问网页的 HTTP 请求(应用层);
2. 传输层(TCP 协议)把应用层处收到的数据进行分割，并在各个报文上打上标记序号及端口号后转发给网络层;
3. 网络层增加作为通信目的地的 MAC 地址后转发给链路层。

接收过程的数据流动方向与发送过程相反，客户端发送的请求从链路层传递到应用层，直到最后服务器接收到请求。

> 发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。这种把数据信息包装起来的做法称为封装。

## <a name="href5">与HTTP关系密切的协议</a> ##

### <a name="href5-3">IP协议</a> ###

IP(Internet Protocol)网络协议位于网络层，其作用是把各种数据包传送给对方，这个过程涉及到两个重要的名词: IP 地址和 MAC 地址，IP 地址指明了节点被分配到的地址，MAC 地址是指网卡所属的固定地址。IP 地址可以和 MAC 地址进行配对，IP 地址可变换，而 MAC 地址基本上不会改变。

### <a name="href5-4">TCP协议</a> ###

TCP 位于传输层，其为网络通信提供可靠的字节流服务(为了方便传输，将大块数据分割成报文段为单位的数据包进行管理)。为了准确无误地将数据送达目标处，TCP 协议采用了大名鼎鼎的"三次握手"策略，可以用下图生动描述此过程:

![image](https://raw.githubusercontent.com/WebUnion-core/anthill/master/WJT20/images/w143.jpg)

### <a name="href5-5">DNS服务</a> ###

DNS(Domain Name System，域名解析)服务和 HTTP 协议一样是属于应用层的协议，它提供域名到 IP 地址之间的解析服务。

> 用户通常使用主机名或域名来访问对方的计算机，而不是直接通过 IP 地址访问，因为与 IP 地址的一组纯数字相比，用字母配合数字的表示形式来指定计算机名更符合人类的记忆习惯。但要让计算机去理解名称，相对而言就变得困难了。因为计算机更擅长处理一长串数字。为了解决上述问题，DNS 服务应运而生，DNS 协议提供通过域名查找 IP 地址，或逆向从 IP 地址反查域名的服务。

![image](https://raw.githubusercontent.com/WebUnion-core/anthill/master/WJT20/images/w144.jpg)

## <a name="href6">URI和URL</a> ##

HTTP 使用 URI(Uniform Resource Identifiers, 统一资源标识符) 来传输数据和建立连接。URL(Uniform Resource Locator，统一资源定位符) 是一种特殊类型的 URI，包含了用于查找某个资源的足够信息。

一个完整的 URL 包含以下几个部分:

1. 协议: 例如"http"、"https"等;
2. 域名: 例如"www.xxx.com";
3. 端口: 端口跟在域名之后，使用":"和域名分隔，端口并非必需;
4. 目录: 域名之后第一个"/"开始到最后一个"/"为止都是目录部分，目录可以是虚拟的目录结构，也可以是真实的目录结构，目录并非必需;
5. 文件名: 最后一个"/"到"?"(如果有的话)之间的部分成为文件名，文件名并非必需;
6. 锚(哈希): "#"后的部分称为锚(哈希)，锚(哈希)并非必需;
7. 查询字符串: "?"到"#"(如果有的话)之间的部分称为查询字符串，它是一对对的键值对组合，每对查询字符串间用"&"分隔，查询字符串并非必需。

---

```
ID         : 18
DATE       : 2017/08/19
AUTHER     : WJT20
TAG        : Web相关
```
