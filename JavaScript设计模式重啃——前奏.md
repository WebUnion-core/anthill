
# JavaScript设计模式重啃——前奏 #

## 目录 ##

1. 动态类型语言和静态类型语言
    1. 动态类型语言
    2. 静态类型语言
2. 鸭子类型
3. 多态
4. 封装
    1. 封装数据
    2. 封装实现
    3. 封装类型
    4. 封装变化

---

## 动态类型语言和静态类型语言 ##

### 动态类型语言 ###

编程语言按数据类型可以分为：动态类型语言和静态类型语言。静态类型语言在编写代码时给变量定义明确的数据类型，而动态类型语言则无需明确定义变量的数据类型，因为只有在程序运行时、变量赋值后，这个变量才会具有某种类型。

动态类型语言的优点：编写的代码量更少，程序员可以更专注于逻辑表达，更利于阅读程序。

动态类型语言的缺点：无法保证变量类型，在程序的运行期可能发生跟类型相关的错误。

### 静态类型语言 ###

静态类型语言的优点：在编译时能及时发现类型不匹配的错误，可以在运行前发现数据类型错误并及时解决。编译器可以针对那些已明确类型的信息作出优化处理，大大提高程序的执行效率。

静态类型语言的缺点：迫使程序员确定变量的数据类型，这归根结底就是辅助我们编写高性能程序的手段而不是最终目的，类型的声明会增加额外的代码，将程序员的关注点从逻辑表达上移开。

---

## 鸭子类型 ##

鸭子类型的由来：“如果它走起来像鸭子，叫起来也是鸭子，那么它就是鸭子”。理解这句话了吗？简言之，鸭子类型指导我们只关注对象的行为，而不关注对象本身。

在动态类型语言的面向对象设计中，鸭子类型的概念至关重要，利用鸭子类型的思想，就能在动态类型语言中实现一个原则：“面向接口编程，而不是面向实现编程”。书中举了两个例子：

1. 一个对象若有 push 和 pop 方法，并且这些方法提供了正确的实现，它就可以被当作栈来使用；

2. 一个对象如果有 length 属性，也可以按照下标来存取属性(最好还有 slice 和 splice 等方法)，这个对象就可以被当作数组使用。

值得注意的是，在 JavaScript 中，“面向接口编程”的过程跟主流的静态类型语言不一样。

---

## 多态 ##

多态的定义：同一操作作用于不同的对象上，可以产生不同的解释和不同的执行结果。简单点说就是，给不同对象发送同一个信息，这些接受信息的对象会采取不同的策略去处理或反馈不同信息。

使用继承来得到多态效果，是让对象表现多态性的最常用的手段，继承通常包括实现继承和接口继承。

JavaScript 比较特殊，JavaScript 对象的多态性是与生俱来的，书中的解释是：JavaScript 作为一门动态类型语言，它在编译时没有类型检查的过程，既没有检查创建的对象类型，又没有检查传递的参数类型。

---

## 封装 ##

封装的目的是将信息隐藏，封装的内容包括：封装数据、封装实现、封装类型和封装变化。

### 封装数据 ###

将内部的变量私有化，外部作用域无法访问这些变量，通常使用闭包实现，示例代码如下：

```
var selfAnim = (function() {
    var timeSpan = 100;
    var count = 0;

    return {
        begin: function() {
            setInterval(function() {
                console.log(count++);
            }, timeSpan);
        }
    }
})();
selfAnim.begin();
```

### 封装实现 ###

从封装实现细节来讲，封装使得对象内部的变化对其他对象而言是不可见的，对象对它自己的行为负责，其他对象或者用户都不关心它的内部实现。封装使得对象之间的耦合变松散，对象之间只通过暴露的API接口来通信，当我们修改一个对象时，可以随意地修改它的内部实现，只要对外接口没有变化，就不会影响程序的其他功能。

### 封装类型 ###

封装类型针对的是静态类型语言，原理是通过抽象类和接口来进行，把对象的真正类型隐藏在抽象类或者接口之后，相比对象的类型，客户更关心对象的行为。

### 封装变化 ###

封装变化，可以把系统中稳定不变的部分和容易变化的部分隔离开来，在系统的演变过程中，我们只需要替换那些容易变化的部分，如果这些部分是已经封装好的，替换起来也相对容易，这可以最大程度地保证程序的稳定性和可扩展性。

---

```
ARTICLE_ID : 30
POST_DATE : 2017/09/09
RECENTLY_MODIFY : 2017/09/09
TIME_COUNTER : 0
AUTHER : WJT20
```
